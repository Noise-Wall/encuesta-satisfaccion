<%- include("templates/header.ejs") %> <%- include("templates/navbar.ejs") %>

<div class="panel panel-form">
  <h3><%= form.tituloText %></h3>
  <form action="<%= form.action %>" method="<%= form.method %>">
    <select name="idCategoria">
      <% if (data[0].contenidoPregunta) { %>
        <% for( let i = 0; i < data2.length; i++ ) { %>
          <option value="<%= data2[i].idCategoria %>" <% if (data[0].idCategoria == data2[i].idCategoria) { %>
           selected
          <% } %>>
            <%=data2[i].contenidoCategoria %> 
          </option>       
        <% } %>
      <% } %>
    </select>
    <input
      type="text"
      name="contenidoPregunta"
      placeholder="ej. ¿Cuál es su nivel de satisfacción?"
      required
      <% if (data[0].contenidoPregunta && form.inEditMode) { %>
        value="<%= data[0].contenidoPregunta %>"
      <% } %>
    />
    <% if (data[0].idPregunta && form.inEditMode) { %>
      <input type="hidden" name="id" value="<%=data[0].idPregunta%>">
    <% } %>
    <% if (!data[0].enEncuesta) { %>
      <input type="hidden" name="enEncuesta" value="0">
    <% } else { %>
      <input type="hidden" name="enEncuesta" value="<%= data[0].enEncuesta %>">
    <% } %>
    <button class="boton" type="submit"><%= form.buttonText %></button>
  </form>
  <a href="/">Regresar</a>
</div>
<% if (!form.inEditMode) { %>
<div class="panel panel-tabla tabla-col4">
  <div class="item-tabla item-tabla-head">#</div>
  <div class="item-tabla item-tabla-head">Contenido de la pregunta</div>
  <div class="item-tabla item-tabla-head">Categoría</div>
  <div class="item-tabla item-tabla-head">Acciones</div>
  <% for (let i = 0; i < data.length; i++) { %>
  <div class="item-tabla"><%= (i + 1) %></div>
  <div class="item-tabla"><%= data[i].contenidoPregunta %></div>
  <div class="item-tabla"><%= data[i].contenidoCategoria %></div>
  <div class="item-tabla">
    <a href="/preguntas/editar/<%= data[i].idPregunta %>">
      <button class="boton boton-tabla">Editar</button>
    </a>
  </div>
  <% } %> <% } %>
  

  <%- include("templates/footer.ejs") %>
</div>
