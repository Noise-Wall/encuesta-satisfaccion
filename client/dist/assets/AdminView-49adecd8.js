import{u as $,o,c as n,F as b,e as p,t as h,a,j as y,f,n as E,h as w,r as u,d as T,k as j}from"./index-2e079f12.js";import{A as O,g as I}from"./get-f30a68b2.js";import{p as L}from"./popup-cfc4d190.js";import{l as P}from"./login-065b59a0.js";import"./token-3b81b8e9.js";function R(r){return O().delete(r).catch(function(s){s.response?(console.log(s.response.data),console.log(s.response.status),console.log(s.response.headers)):s.request?console.log(s.request):console.log("Error",s.message)})}const A={async deleteTabla(r){return(await R(r)).data}};const N={class:"item-tabla item-tabla-head"},x=a("div",{class:"item-tabla item-tabla-head"},null,-1),V={class:"item-tabla"},B={class:"item-tabla actions"},F=["onClick"],S=["onClick"],q=["onClick"],H={__name:"table",props:{tablaTitulos:Array,tablaColumnas:String,tablaData:Object},setup(r){const d=$();function s(l){switch(l){case"idEmpresa":return"empresa";case"idCategoria":return"categoria";case"idPregunta":return"pregunta";case"idEncuesta":return"encuesta";case"idRespuesta":return"respuesta";default:console.log("Categoria invalida");return}}function v(l,t){const e=t;d.push({name:"editar",state:e,params:{categoria:s(Object.keys(t)[0]),id:l}})}async function g(l,t){const e=s(Object.keys(t)[0]),c={};console.log(`/${e}s/delete/${l}`),await A.deleteTabla(`/${e}s/delete/${l}`,c)}function m(l,t){console.log("confirmar borrado");const e=Object.entries(t),c=`<h3>Atención</h3> Se borrará el siguiente dato: <br>
  <br>${e[0][0]}: ${e[0][1]}
  <br>${e[1][0]}: ${e[1][1]}
  <br><br>Para continuar, clic en el boton de Aceptar.
  `;L.createPopup(c,async i=>{await g(l,t).then(()=>{i.target.parentElement.parentElement.remove(),window.location.reload()}).catch(_=>console.log(_.message))},"boton-eliminar")}return(l,t)=>(o(),n("div",{class:E(["panel-tabla",r.tablaColumnas])},[(o(!0),n(b,null,p(r.tablaTitulos,e=>(o(),n("div",N,h(e),1))),256)),x,(o(!0),n(b,null,p(r.tablaData,(e,c)=>(o(),n(b,null,[(o(!0),n(b,null,p(e,i=>(o(),n("div",V,h(i),1))),256)),a("div",B,[a("i",{class:"fa-solid fa-file-pen",onClick:i=>v(Object.values(e)[0],e)},null,8,F),s(Object.keys(e)[0])==="encuesta"?(o(),n("i",{key:0,class:"fa-solid fa-eye",onClick:i=>y(d).push(`/admin/encuesta/${Object.values(e)[0]}`)},null,8,S)):f("",!0),a("i",{class:"fa-solid fa-trash-can",onClick:i=>m(Object.values(e)[0],e)},null,8,q)])],64))),256))],2))}},M={key:0},z=a("p",null,"Seleccionar una categoría:",-1),W={key:1},G={style:"font-weight: bold;",id:"categoriaLabel"},J=a("h1",null,"+",-1),K=[J],Q=a("div",{class:"cargando"},null,-1),U=a("p",null,"Cargando...",-1),X={key:2},oe={__name:"AdminView",setup(r){const d=w(),s=$(),v=u(!1),g=u(!1);u(""),T(()=>{d.fullPath.startsWith(P.validateRoute(d))?v.value=!0:s.push("/login")});const m=u([]),l=u(0),t=u(""),e=u(""),c=u([]);async function i(C){switch(t.value=C.target.innerHTML,l.value=0,m.value=[],D(),m.value=await I.getTabla(`/${t.value.toLowerCase()}`),l.value=Object.values(m.value)[0].length,t.value==="Categorias"?e.value="tabla-col3":e.value="tabla-col5",t.value){case"Empresas":c.value=["ID","Nombre Empresa","Nombre Contacto","Correo"];break;case"Categorias":c.value=["ID","Contenido"];break;case"Preguntas":c.value=["ID","Contenido","Categoria","Habilitada"];break;case"Encuestas":c.value=["ID","Fecha","Comentarios","Empresa"];break;case"Respuestas":c.value=["ID","Valor","ID Pregunta","ID Encuesta"];break;default:t.value=""}}function _(){s.push({name:"agregar",params:{categoria:t.value.toLowerCase().slice(0,-1)}})}function D(){g.value=!1,setTimeout(()=>g.value=!0,3e3)}return(C,k)=>(o(),n(b,null,[v.value?(o(),n("section",M,[z,a("ul",{class:"menu"},[a("li",{onClick:i},"Preguntas"),a("li",{onClick:i},"Categorias"),a("li",{onClick:i},"Empresas"),a("li",{onClick:i},"Encuestas"),a("li",{onClick:i},"Respuestas")])])):f("",!0),t.value?(o(),n("section",W,[a("p",G,h(t.value),1),m.value&&l.value>0?(o(),n(b,{key:0},[j(H,{tablaTitulos:c.value,tablaColumnas:e.value,tablaData:Object.values(m.value)[0]},null,8,["tablaTitulos","tablaColumnas","tablaData"]),a("button",{class:"boton",onClick:_},K)],64)):g.value?(o(),n("p",X,"No se encontró ningún valor.")):(o(),n(b,{key:1},[Q,U],64))])):f("",!0),a("section",null,[a("button",{class:"boton",onClick:k[0]||(k[0]=Y=>y(s).push("/"))},"Regresar al inicio")])],64))}};export{oe as default};
