import{t as n,a}from"./token-3b81b8e9.js";function s(o){if(o.fullPath.startsWith("/admin")){if(n.getToken("token")==="")return"/login";console.log("token found"),t().then(()=>(console.log("valid token"),"/admin")).catch(()=>"/login")}else if(o.fullPath.startsWith("/login"))return n.getToken("token")!==""&&(console.log("token found"),t().then(()=>(console.log("valid token"),"/admin")).catch(()=>"/login")),"/login";return o.fullPath}function l(){try{return a.create({baseURL:"https://laquin-encuesta-rest.onrender.com",headers:{Accept:"application/x-www-form-urlencoded","Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})}catch(o){return console.log(o.message),o}}function r(o){return l().post("/login",o).catch(e=>e.response?console.log(e.response):console.log(e.message))}function t(){return l().post("/validate").catch(o=>o.response?console.log(o.response):console.log(o.message))}const i={async logIn(o){await r(o).then(e=>{console.log(e.data)}).catch(e=>console.error(e.message))},validateRoute:s};export{i as l};
